{
  "$defs": {
    "Confidence": {
      "enum": [
        "low",
        "medium",
        "high"
      ],
      "title": "Confidence",
      "type": "string"
    },
    "Finding": {
      "properties": {
        "id": {
          "title": "Id",
          "type": "string"
        },
        "gate": {
          "$ref": "#/$defs/GateName"
        },
        "severity": {
          "$ref": "#/$defs/Severity"
        },
        "summary": {
          "title": "Summary",
          "type": "string"
        },
        "files": {
          "items": {
            "type": "string"
          },
          "title": "Files",
          "type": "array"
        },
        "rule": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Rule"
        },
        "line": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Line"
        },
        "column": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Column"
        },
        "actual": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            }
          ],
          "title": "Actual"
        },
        "threshold": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            }
          ],
          "title": "Threshold"
        },
        "status": {
          "default": "fail",
          "title": "Status",
          "type": "string"
        },
        "raw": {
          "additionalProperties": true,
          "title": "Raw",
          "type": "object"
        }
      },
      "required": [
        "id",
        "gate",
        "severity",
        "summary",
        "actual",
        "threshold"
      ],
      "title": "Finding",
      "type": "object"
    },
    "GateName": {
      "enum": [
        "lint",
        "typecheck",
        "test"
      ],
      "title": "GateName",
      "type": "string"
    },
    "GateResult": {
      "properties": {
        "name": {
          "$ref": "#/$defs/GateName"
        },
        "status": {
          "$ref": "#/$defs/GateStatus"
        },
        "duration_ms": {
          "default": 0,
          "title": "Duration Ms",
          "type": "integer"
        }
      },
      "required": [
        "name",
        "status"
      ],
      "title": "GateResult",
      "type": "object"
    },
    "GateStatus": {
      "enum": [
        "pass",
        "fail",
        "skipped"
      ],
      "title": "GateStatus",
      "type": "string"
    },
    "InferredHint": {
      "properties": {
        "finding_id": {
          "title": "Finding Id",
          "type": "string"
        },
        "hint": {
          "title": "Hint",
          "type": "string"
        },
        "confidence": {
          "$ref": "#/$defs/Confidence"
        }
      },
      "required": [
        "finding_id",
        "hint",
        "confidence"
      ],
      "title": "InferredHint",
      "type": "object"
    },
    "RunMode": {
      "enum": [
        "canary",
        "full"
      ],
      "title": "RunMode",
      "type": "string"
    },
    "RunStatus": {
      "enum": [
        "pass",
        "fail"
      ],
      "title": "RunStatus",
      "type": "string"
    },
    "Severity": {
      "enum": [
        "low",
        "medium",
        "high",
        "critical"
      ],
      "title": "Severity",
      "type": "string"
    }
  },
  "properties": {
    "version": {
      "default": "1.0.0",
      "title": "Version",
      "type": "string"
    },
    "run_id": {
      "title": "Run Id",
      "type": "string"
    },
    "mode": {
      "$ref": "#/$defs/RunMode"
    },
    "status": {
      "$ref": "#/$defs/RunStatus"
    },
    "timestamp": {
      "title": "Timestamp",
      "type": "string"
    },
    "repo": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Repo"
    },
    "branch": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Branch"
    },
    "changed_files": {
      "items": {
        "type": "string"
      },
      "title": "Changed Files",
      "type": "array"
    },
    "gates": {
      "items": {
        "$ref": "#/$defs/GateResult"
      },
      "title": "Gates",
      "type": "array"
    },
    "findings": {
      "items": {
        "$ref": "#/$defs/Finding"
      },
      "title": "Findings",
      "type": "array"
    },
    "inferred_hints": {
      "items": {
        "$ref": "#/$defs/InferredHint"
      },
      "title": "Inferred Hints",
      "type": "array"
    }
  },
  "required": [
    "run_id",
    "mode",
    "status",
    "timestamp",
    "gates",
    "findings"
  ],
  "title": "FailuresPayload",
  "type": "object"
}
