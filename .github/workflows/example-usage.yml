name: "Example: PyGate Quality Gates"

# Copy this workflow into your repository as .github/workflows/pygate.yml

on:
  pull_request:
    branches: [main]

permissions:
  contents: read
  pull-requests: write  # Required for PR comments

jobs:
  quality-gates:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
        with:
          fetch-depth: 0  # Required for changed file detection

      - uses: roli-lpci/pygate/.github/actions/pygate@main
        with:
          mode: canary          # or "full" to include tests
          repair: "true"        # attempt auto-repair on failures
          max-attempts: 3
          python-version: "3.12"
          post-comment: "true"  # post findings as PR comment
